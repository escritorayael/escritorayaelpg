<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book Detail - Yael Goldmann</title>
  <link rel="icon" href="IMAGES/Imagen de WhatsApp 2025-07-05 a las 16.04.10_4774b179.jpg" type="image/png">
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="IMAGES/logo.png" type="image/png">
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<style>
  .body{
    margin-top: 3rem;
    }
  
  .product-btn-sample, .product-btn-audio, .product-btn-cart, .product-select-format {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #d1d5db;
    border-radius: 0.25rem;
    padding: 0.75rem 1rem;
    font-weight: 500;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    width: 100%;
    background: white;
    color: #482922;
  }

.product-btn-follow {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 1px solid #482922;
    border-radius: 0.25rem;
    padding: 0.75rem 1rem;
    font-weight: 500;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    width: 30%;
    background: transparent;
    color: #482922;
  }

  .product-btn-sample:hover, .product-btn-audio:hover, .product-btn-follow:hover {
    background-color: #482922;
    color: #ffff;
  }
  .product-btn-cart {
    background-color: #482922;
    color: white;
    border: none;
  }
  .product-btn-cart:hover {
    background-color: transparent;
    border: 1px solid #482922;
    color: #482922;
  }

  .logo-yael {
      margin-left: -18rem !important;
    text-decoration: none;
  color: inherit; /* Opcional: hereda el color del contenedor/padre */
  font-weight: bold; /* Opcional: estilo de texto */
  font-size: 1.2rem; /* Ajusta según tu diseño */
}

.zoom-wrapper {
  position: relative;
  width: 100%;
}

.zoom-image {
  width: 350%;
  display: block;
  margin-left: -10rem;
}

.zoom-result {
  position: absolute;
  border: 1px solid #ccc;
  width: 700px;
  height: 650px;
  top: 0;
  left: 190%;
  background-repeat: no-repeat;
  background-size: 200% 200%;
  display: none;
  z-index: 10;
  box-shadow: 0 0 10px rgba(0,0,0,0.2);
}

.img-lens {
  position: absolute;
  border: 1px solid #d1d5db;
  width: 150px;
  height: 150px;
  margin-left: -10rem;
  opacity: 0.4;
  background-color: #98c3ed;
  pointer-events: none;
  z-index: 999;
  display: none;
}

.format-selector {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.format-top {
  width: 100%;
  max-width: 280px;
  text-align: center;
}

.format-bottom {
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
}

.format-option {
  flex: 1;
  padding: 0.75rem;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.2s, border 0.2s;
  font-size: 0.9rem;
  text-align: center;
  border: 1px solid #d1d5db;
  background: white;
}

.format-option.active {
  border: 2px solid #482922;
  background-color: #eef6fb;
}

.loading-price {
  opacity: 0.5;
  pointer-events: none;
  position: relative;
}

.loading-spinner {
  position: absolute;
  top: 0.4rem;
  right: 1rem;
  width: 16px;
  height: 16px;
  border: 2px solid #ccc;
  border-top: 2px solid #482922;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Global full-screen loader */
.full-page-loader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(255, 255, 255, 0.6);
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
  display: none; /* Oculto por defecto */
}

.full-page-loader .spinner {
  border: 4px solid #ccc;
  border-top: 4px solid #482922;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
}

.cart-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
}

.cart-item-controls {
  display: flex;
  justify-content: flex-end;
  margin-left: auto;
}

.star {
  font-size: 1.2rem;
  color: #ccc; /* gris por defecto */
}

.star.filled {
  color: gold;
}

.star.half {
  color: gold;
  position: relative;
  display: inline-block;
  width: 1.2em;
  height: 1.2em;
}

.star.half::after {
  content: '★';
  position: absolute;
  top: 0;
  left: 0;
  width: 50%;
  height: 100%;
  color: #ccc;
  overflow: hidden;
  z-index: 1;
}

.related-and-details-wrapper {
  margin-left: 0.2rem; /* Puedes ajustar a 1rem o menos para que quede más pegado */
}

.related-and-details-wrapper {
  margin-left: -150px !important;
  padding-left: 0 !important;
    margin-top: -80px !important;
}

.see-details-btn {
  background: none;
  border: none;
  color: #482922;
  font-size: 0.9rem;
  margin-right: 32rem !important;
  margin-top: -1rem;
  cursor: pointer;
  padding: 0;
  text-decoration: none;
  white-space: nowrap; /* <-- Agrega esto */
  transition: text-decoration 0.2s ease;
}

.see-details-btn:hover {
  text-decoration: underline;
}

    .language-selector {
  position: relative;
  display: inline-block;
  margin-left: 1rem;
  font-size: 14px;
  cursor: pointer;
}

.selected-lang {
  display: flex;
  align-items: center;
  margin-left: 2rem !important;
  margin-right: -8rem !important;
  gap: 6px;
  padding: 5px 10px;
  border-radius: 1px;
  background-color: transparent;
  color: #482922;
}

.selected-lang:hover + .language-dropdown,
.language-dropdown:hover {
  display: block;
}

.flag-icon {
  width: 18px;
  height: auto;
}

.language-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  background-color: #fff;
  color: black;
  border-radius: 4px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  padding: 10px;
  z-index: 999;
  white-space: nowrap;
  min-width: 160px;
}

.language-dropdown label {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px;
  cursor: pointer;
}

.language-dropdown input {
  margin: 0;
}

.selected-lang:hover + .language-dropdown {
  display: block;
  animation: fadeInLang 0.0s ease 0.1s forwards; /* 400ms delay */
  opacity: 0;
  pointer-events: none;
}

@keyframes fadeInLang {
  to {
    opacity: 1;
    pointer-events: auto;
  }
}

#languageOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  backdrop-filter: blur(2px);
  z-index: 100;
  display: none;
}

.navbar,
.language-selector {
  position: relative;
  z-index: 101;
}

#loader-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: white;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

.loader-wrapper {
  display: flex;
  justify-content: center;
  align-items: center;
}

.loader {
  border: 6px solid #ccc;
  border-top: 6px solid #482922;
  border-radius: 50%;
  width: 48px;
  height: 48px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

#languageOverlay {
  transition: opacity 0.3s ease;
  opacity: 0;
}

#languageOverlay.show {
  opacity: 1;
}

.footer{
margin-top: 5rem !important;

}


</style>
<body>
    <div id="languageOverlay"></div>
  <!-- Navigation -->
    <nav class="navbar">
  <div class="nav-container">
    <div class="nav-content">
      <a href="index.html" class="logo-yael" data-i18n="navBrand">Yael Goldmann</a>

      <div class="amazon-searchbar">
        <form id="searchForm">
          <select class="search-category">
  <option value="all" data-i18n="searchAll">All</option>
</select>
<input type="text" id="searchInput" placeholder="Search..." data-i18n-placeholder="searchPlaceholder" />

          <button type="submit">
            <i data-lucide="search"></i>
          </button>
        </form>
      </div>

      <div class="language-selector" id="langSelector">
        <div class="selected-lang">
          <img src="https://flagcdn.com/us.svg" alt="EN" class="flag-icon" />
          <span data-i18n="langEN">EN</span>
          <i data-lucide="chevron-down"></i>
        </div>
        <div class="language-dropdown">
          <label>
            <input type="radio" name="lang" value="en" checked />
            <span data-i18n="langFullEN">English - EN</span>
          </label>
          <label>
            <input type="radio" name="lang" value="es" />
            <span data-i18n="langFullES">Español - ES</span>
          </label>
        </div>
      </div>

      <div class="nav-links">
        <a href="pagina-libros.html" data-i18n="navBooks">Books</a>
        <a href="about.html" data-i18n="navAbout">About</a>
        <a href="index.html#contact" data-i18n="navContact">Contact</a>
        <a id="accountLink" href="#" class="nav-icon-button" title="My Account / Login" data-i18n-title="navAccountTitle">
  <i data-lucide="user"></i>
</a>

        <button class="cart-toggle" onclick="toggleCart()" data-i18n-title="navCartTitle">
          <i data-lucide="shopping-cart"></i>
          <span class="cart-count" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </div>
</nav>

    <div id="searchOverlay"></div>

    <!-- Cart Modal -->
        <div id="cartModal" class="cart-modal">
            <div class="cart-modal-content">
                <div class="cart-header">
                    <h2>Shopping Cart</h2>
                    <button class="close-cart" onclick="toggleCart()">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                <div class="cart-body" id="cartItems">
                    <!-- Cart items will be populated by JavaScript -->
                </div>
                <div class="cart-footer">
                    <div class="cart-total">
                        <div class="total-row">
                            <span>Subtotal:</span>
                            <span id="cartSubtotal">$0.00</span>
                        </div>
                        <div class="total-row">
                            <span>Tax (8.5%):</span>
                            <span id="cartTax">$0.00</span>
                        </div>
                        <div class="total-row total-final">
                            <span>Total:</span>
                            <span id="cartTotal">$0.00</span>
                        </div>
                    </div>
                    <div class="cart-actions">
                        <button class="btn btn-primero" onclick="clearCart()">Clear Cart</button>
                        <button class="btn btn-primero" onclick="checkout()" id="checkoutBtn">
                            <i data-lucide="credit-card"></i>
                            Checkout
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cart Page (Alternative view) -->
        <div id="cartPage" class="cart-page" style="display: none;">
            <div class="cart-page-container">
                <div class="cart-page-header">
                    <h1>Your Shopping Cart</h1>
                    <button class="btn btn-outline" onclick="showMainPage()">
                        <i data-lucide="arrow-left"></i>
                        Continue Shopping
                    </button>
                </div>
                
                <div class="cart-page-content">
                    <div class="cart-items-section">
                        <div id="cartPageItems">
                            <!-- Cart items will be populated here -->
                        </div>
                    </div>
                    
                    <div class="cart-summary-section">
                        <div class="cart-summary">
                            <h3>Order Summary</h3>
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="pageSubtotal">$0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Tax (8.5%):</span>
                                <span id="pageTax">$0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Shipping:</span>
                                <span>FREE</span>
                            </div>
                            <hr>
                            <div class="summary-row total">
                                <span>Total:</span>
                                <span id="pageTotal">$0.00</span>
                            </div>
                            
                            <div class="checkout-section">
                                <button class="btn btn-primero btn-full" onclick="checkout()">
                                    <i data-lucide="credit-card"></i>
                                    Proceed to Checkout
                                </button>
                                <button class="btn btn-primero btn-full" onclick="clearCart()">
                                    Clear Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


<main class="section-container" style="padding-top: 2rem;">
  <div style="display: flex; gap: 3rem; flex-wrap: wrap; justify-content: center; align-items: flex-start;">
    
    <!-- LEFT COLUMN -->
    <div style="flex: 0.8; max-width: 350px; margin-right: 2rem;">
      <div class="zoom-wrapper" id="zoomWrapper" style="position: relative;">
        <img id="bookImage" src="" class="zoom-image" alt="Book Cover">
        <div id="lens" class="img-lens"></div>
        <div id="zoomResult" class="zoom-result"></div>
      </div>

      <!-- Thumbnails -->
      <div style="margin-top: 0.75rem; display: flex; justify-content: flex-start; gap: 0.5rem;margin-left: -10rem;">
        <img id="thumb1" src="" style="width: 42px; height: auto; cursor: pointer; border: 1.5px solid #ccc; border-radius: 4px;">
        <img id="thumb2" src="" style="width: 42px; height: auto; cursor: pointer; border: 1.5px solid #ccc; border-radius: 4px;">
      </div>
    </div>

    <!-- CENTER COLUMN -->
    <div style="flex: 3; min-width: 600px; max-width: 1000px; margin-left: 1rem;">
      <h1 id="bookTitle">Loading...</h1>
      <div id="ratingContainer" class="book-rating" style="margin: 0.5rem 0;">
  <span id="ratingStars" style="color: #fbbf24; font-size: 1rem;"></span>
  <span id="ratingText" class="reviews" style="margin-left: 0.5rem;"></span>
</div>

<hr style="margin: 1rem 0; border: none; border-top: 1px solid #d1d5db;">


      <div class="book-description" id="bookDescription" style="margin-top: 1rem; line-height: 1.6; color: #374151; overflow: hidden; display: -webkit-box;  -webkit-box-orient: vertical;">
        Please wait...
      </div>
      <hr style="margin: 1rem 0; border: none; border-top: 1px solid #d1d5db;">
      <div id="bookSpecs" style="display: flex; justify-content: center; gap: 4rem; text-align: center; margin-top: 2rem; flex-wrap: wrap;">
  
       <div>
  <i data-lucide="book-open" style="width: 24px; height: 24px;"></i>
  <p style="margin: 0.25rem 0; font-size: 0.8rem;" data-i18n="product_print_length">Print length</p>
  <p id="spec-pages" style="font-weight: bold; margin: 0;">-</p>
</div>
<div>
  <i data-lucide="globe" style="width: 24px; height: 24px;"></i>
  <p style="margin: 0.25rem 0; font-size: 0.8rem;" data-i18n="product_language">Language</p>
  <p id="spec-language" style="font-weight: bold; margin: 0;">-</p>
</div>
<div>
  <i data-lucide="calendar-days" style="width: 24px; height: 24px;"></i>
  <p style="margin: 0.25rem 0; font-size: 0.8rem;" data-i18n="product_publication_date">Publication date</p>
  <p id="spec-publication" style="font-weight: bold; margin: 0;">-</p>
</div>
<div>
  <i id="spec-icon" data-lucide="ruler" style="width: 24px; height: 24px;"></i>
  <p id="spec-label" data-i18n="product_dimensions" style="margin: 0.25rem 0; font-size: 0.8rem;">Dimensions</p>
  <p id="spec-dimensions" style="font-weight: bold; margin: 0;">-</p>
</div>

<!-- Botón ver detalles -->
<button class="see-details-btn" onclick="scrollToDetails()" data-i18n="see_all_details">See all details</button>

</div>
<hr style="margin: 1rem 0; margin-bottom: 0rem;border: none; border-top: 1px solid #d1d5db; margin-top: 60px; margin-left:-350px; width:160%;">

    </div>

    <!-- RIGHT COLUMN AMAZON STYLE -->
    <div style="
  flex: 1.1;
  min-width: 300px;
  max-width: 380px;
  background-color: white;
  padding: 1.5rem;
  border: 1px solid #e5e7eb;
  border-radius: 0.5rem;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  font-family: Arial, sans-serif;
  align-self: stretch;
  display: flex;
  flex-direction: column;
  gap: 0.2rem;
  min-height: calc(100vh - 220px);
">

<!-- FORMAT OPTIONS -->
<div style="display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem;">
  <div class="format-selector">
    <div id="btn-physical" class="format-option format-top active" onclick="selectFormatWithDelay('physical')">
      <div><strong data-i18n="format.paperback">Paperback</strong></div>
      <div>$<span id="price-physical">--</span></div>
    </div>

    <div class="format-bottom">
      <div id="btn-digital" class="format-option" onclick="selectFormatWithDelay('digital')">
        <div><strong data-i18n="format.kindle">eBook</strong></div>
        <div>
          $<span id="price-digital">--</span>
        </div>
      </div>

      <div id="btn-audio" class="format-option" onclick="selectFormatWithDelay('audio')">
        <div><strong data-i18n="format.audiobook">Audiobook</strong></div>
        <div>$<span id="price-audio">--</span></div>
      </div>
    </div>
  </div>
</div>


      <!-- PRICE -->
<p id="bookPrice" style="font-size: 1.5rem; font-weight: bold; margin: 1rem 0 0.25rem;">$0.00</p>

<!-- STOCK -->
<p data-i18n="product_in_stock" style="color: green; font-weight: bold; margin-bottom: 1rem;">In Stock</p>

<!-- QUANTITY -->
<label for="quantity" data-i18n="product_quantity_label" style="font-size: 0.9rem; margin-bottom: 0.25rem;">Quantity:</label>
<select id="quantity" style="width: 100%; padding: 0.5rem; margin-bottom: 1rem; border: 1px solid #ccc; border-radius: 4px;">
  <option>1</option>
  <option>2</option>
  <option>3</option>
  <option>4</option>
  <option>5</option>
</select>

<!-- BUTTONS -->
<button class="product-btn-cart" onclick="handleAddToCart()" style="margin-bottom: 0.5rem;">
  <i data-lucide="shopping-cart"></i>
  <span data-i18n="product_add_to_cart">Add to Cart</span>
</button>
<button class="product-btn-cart" style="background-color: #ff9900;" onclick="handleBuyNow()">
  <span data-i18n="product_buy_now">Buy Now</span>
</button>

    </div>
  </div>

<div class="related-and-details-wrapper" style="margin-left: 0; padding-left: 0;">
  <section id="related-products" style="padding: 0; margin-top: 5rem !important;">
    <h2 data-i18n="related_products" style="font-size: 1.3rem; margin-bottom: 1rem;">Related products</h2>
    <div id="relatedContainer" style="display: flex; gap: 5rem; overflow-x: auto; padding: 0;"></div>
  </section>

  <hr style="margin: 1rem 0; border: none; border-top: 1px solid #d1d5db; margin-left:-130px; width:130%;">

  <section id="product-details" style="padding: 0;">
    <h2 data-i18n="product_details" style="font-size: 1.3rem; margin-bottom: 0.5rem;">Product details</h2>
    <ul id="productDetailsList" style="list-style: none; padding: 0; line-height: 2;"></ul>
  </section>
</div>


<hr style="margin: 1rem 0; border: none; border-top: 1px solid #d1d5db; margin-left:-250px; width:145%;">

<section id="about-author" style="display: flex; align-items: flex-start; gap: 2rem; margin-left: -10rem !important; margin-top: 3rem;">
  <img src="IMAGES/Imagen de WhatsApp 2025-07-05 a las 16.04.10_4774b179.jpg" alt="Yael Goldmann" style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%;">
  <div>
    <h2 style="margin: 0 0 0.5rem; font-size: 2rem;" data-i18n="about_author_title">About the author</h2>
    <p style="min-width: 1000px; font-size: 1rem; line-height: 1.5;" data-i18n="about_author_paragraph">
      Yael Goldmann was born in Argentina and currently resides in Caracas, Venezuela. She began her professional career as a journalist, later delving into the field of aircraft marketing. She also worked as a financial advisor and is currently a prominent executive and life coach. She maintains direct contact with her thousands of followers through Instagram, where she is known as <strong>@Coach_Yael_Goldmann</strong>.
    </p>
  </div>
</section>


<hr style="margin: 1rem 0; border: none; border-top: 1px solid #d1d5db; margin-left:-250px; width:145%;">

<section id="reviews" style="margin-top: 3rem; display: flex; flex-wrap: wrap; gap: 2rem; margin-left: -10rem;">
<!-- LEFT STATS -->
<div style="flex: 1; min-width: 250px; max-width: 300px;">
  <h2 data-i18n="customer_reviews" style="margin-bottom: 0.5rem; font-size: 1.2rem;">Customer reviews</h2>
  <div id="averageStars" style="font-size: 1.5rem; color: gold;">★★★★★</div>
  <p id="averageRating" data-i18n="rating_out_of_5">5 out of 5</p>
  <p id="reviewCount" data-i18n="global_ratings">0 global ratings</p>

  <div id="ratingDistribution"></div>

  <hr style="margin-top: 20px;">
  <h3 data-i18n="review_this_product" style="margin-bottom: 0.5rem; margin-top: 20px;">Review this product</h3>
<a href="escribir-review.html" class="btn-primero" data-i18n="write_review" style="padding: 0.5rem 1rem; border: 1px solid #ccc; cursor: pointer; text-decoration: none;
">Write a customer review</a>
</div>

<!-- RIGHT REVIEWS -->
<div style="flex: 2; min-width: 300px;">
  <h2 data-i18n="top_reviews" style="font-size: 1.2rem; margin-bottom: 0.5rem;">Top reviews</h2>
  <div id="reviewList" data-i18n="no_reviews">No reviews yet.</div>
</div>

<!-- Modal para nueva reseña -->
<div id="reviewModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 2rem 2.5rem; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 1000; border-radius: 1px; max-width: 500px; width: 90%; font-family: 'Segoe UI', sans-serif;">
  <h2 data-i18n="leave_review" style="margin-bottom: 1.5rem; font-size: 1.5rem; text-align: center; color: #482922;">Leave a Review</h2>
  <div style="margin-bottom: 1.5rem;">
    <label data-i18n="your_rating" style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #333;">Your Rating</label>
    <div id="starSelector" style="font-size: 2rem; color: #ccc; cursor: pointer;">
      <span data-star="1">☆</span>
      <span data-star="2">☆</span>
      <span data-star="3">☆</span>
      <span data-star="4">☆</span>
      <span data-star="5">☆</span>
    </div>
    <input type="hidden" id="starRating" value="0">
  </div>
  <div style="margin-bottom: 1.5rem;">
    <label for="reviewText" data-i18n="your_review" style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #333;">Your Review</label>
    <textarea id="reviewText" rows="5" style="width: 100%; padding: 0.75rem; border-radius: 1px; border: 1px solid #482922; resize: vertical; font-size: 1rem"></textarea>
  </div>
  <div style="display: flex; justify-content: space-between; gap: 1rem;">
    <button onclick="submitReview()" data-i18n="submit" style="flex: 1; padding: 0.75rem; background-color: #482922; color: white; border: none; border-radius: 1px; font-size: 1rem; cursor: pointer; transition: background-color 0.3s ease;">
      Submit
    </button>
    <button onclick="document.getElementById('reviewModal').style.display='none'" data-i18n="cancel" style="flex: 1; padding: 0.75rem; background-color: #e5e7eb; color: #333; border: none; border-radius: 1px; font-size: 1rem; cursor: pointer; transition: background-color 0.3s ease;">
      Cancel
    </button>
  </div>
</div>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    const stars = document.querySelectorAll("#starSelector span");
    const starRating = document.getElementById("starRating");
    let selectedRating = 0;

    stars.forEach(star => {
      star.addEventListener("click", () => {
        selectedRating = parseInt(star.getAttribute("data-star"));
        starRating.value = selectedRating;
        updateStars(selectedRating);
      });

      star.addEventListener("mouseover", () => {
        const hoverRating = parseInt(star.getAttribute("data-star"));
        updateStars(hoverRating);
      });

      star.addEventListener("mouseout", () => {
        updateStars(selectedRating);
      });
    });

    function updateStars(rating) {
      stars.forEach(star => {
        const val = parseInt(star.getAttribute("data-star"));
        star.textContent = val <= rating ? '★' : '☆';
        star.style.color = val <= rating ? 'gold' : '#ccc';
      });
    }
  });
</script>


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, doc, getDoc, collection, getDocs, setDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBuUHOPcSjO71G0fftwhvqQV3UMqjpJJZU",
    authDomain: "escritora-yael.firebaseapp.com",
    projectId: "escritora-yael",
    storageBucket: "escritora-yael.appspot.com",
    messagingSenderId: "403131540905",
    appId: "1:403131540905:web:687084531c4e1ad74590b8",
    measurementId: "G-2QYFEYN0BG"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  const slug = new URLSearchParams(window.location.search).get("producto");

  // ======== CARGAR LIBRO =========
  if (slug) {
    const ref = doc(db, "books", slug);
    const docSnap = await getDoc(ref);

    if (docSnap.exists()) {
      const book = docSnap.data();
      window.book = book; // Global para los demás scripts

      document.getElementById("bookTitle").textContent = book.title;
const currentLang = localStorage.getItem("lang") || "es";
function renderBookDescription(book) {
  const lang = localStorage.getItem("lang") || "es";
  const description = lang === "en" ? (book.description_en || book.description) : book.description;
  document.getElementById("bookDescription").textContent = description;
}

// Al cargar el libro:
renderBookDescription(book);

// Además, cuando se cambia de idioma:
document.querySelectorAll('input[name="lang"]').forEach((input) => {
  input.addEventListener("change", (e) => {
    const selectedLang = e.target.value;
    renderBookDescription(book); // ✅ Actualiza la descripción según el nuevo idioma
  });
});


      document.getElementById("bookImage").src = book.image;
      document.getElementById("thumb1").src = book.image;

      if (book.image2) {
        document.getElementById("thumb2").src = book.image2;
        document.getElementById("thumb2").style.display = "inline-block";
      }

      // Rating
      if (book.rating && book.rating.count > 0) {
  const starsEl = document.getElementById("ratingStars");
  const textEl = document.getElementById("ratingText");
  const rating = book.rating;
  const starsToFill = Math.round(rating.value);
  let starsHtml = "★".repeat(starsToFill) + "☆".repeat(5 - starsToFill);
  starsEl.innerHTML = starsHtml;
  textEl.textContent = `${rating.value.toFixed(1)} rating (${rating.count} reviews)`;
} else {
  document.getElementById("ratingStars").innerHTML = "☆☆☆☆☆";
  document.getElementById("ratingText").textContent = "No ratings yet";
}


      // Precios
      document.getElementById("price-physical").textContent = book.prices.physical.toFixed(2);
      document.getElementById("price-digital").textContent = book.prices.digital.toFixed(2);
      document.getElementById("price-audio").textContent = book.prices.audio.toFixed(2);
      document.getElementById("bookPrice").textContent = `$${book.prices.physical.toFixed(2)}`;

      // Specs físicas por defecto
      document.getElementById("spec-pages").textContent = book.specs.physical.pages;
      document.getElementById("spec-language").textContent = book.specs.physical.language;
      document.getElementById("spec-publication").textContent = book.specs.physical.publication;
      document.getElementById("spec-dimensions").textContent = book.specs.physical.dimensions;

      // Zoom (si está implementado)
      if (typeof imageZoom === "function") {
        imageZoom("bookImage", "zoomResult");
      }
    } else {
      console.error("Libro no encontrado.");
    }
  }

  // ======== RESEÑAS =========
  const reviewBtn = document.getElementById("writeReviewBtn");
  const reviewModal = document.getElementById("reviewModal");

  let currentUser = null;
  onAuthStateChanged(auth, user => {
    currentUser = user;
  });

  reviewBtn.addEventListener("click", () => {
  if (!currentUser) {
    alert("You must be logged in to write a review.");
    window.location.href = "login.html";
  } else {
    window.location.href = `escribir-review.html?producto=${slug}`;
  }
});


  window.submitReview = async () => {
    const stars = parseInt(document.getElementById("starRating").value);
    const text = document.getElementById("reviewText").value.trim();
    if (!stars || !text || !currentUser) return;

    const userReviewRef = doc(db, `reviews/${slug}/entries/${currentUser.uid}`);
    await setDoc(userReviewRef, {
      stars,
      text,
      user: currentUser.displayName || currentUser.email.split('@')[0],
      date: new Date().toISOString()
    });

    alert("Review submitted.");
    reviewModal.style.display = "none";
    loadReviews();
  
  const notifRef = doc(db, `notifications/${currentUser.uid}/reviews/${slug}`);
await setDoc(notifRef, {
  bookSlug: slug,
  bookTitle: book.title,
  stars,
  text,
  date: new Date().toISOString()
});

  };

  
// Actualizar rating promedio del libro
const q = collection(db, `reviews/${slug}/entries`);
const snap = await getDocs(q);
let total = 0;
snap.forEach(doc => total += doc.data().stars);
const avg = total / snap.size;

await setDoc(doc(db, "books", slug), {
  rating: {
    value: avg,
    count: snap.size
  }
}, { merge: true });


  async function loadReviews() {
    const q = collection(db, `reviews/${slug}/entries`);
    const snap = await getDocs(q);
    const reviews = [];

    snap.forEach(doc => reviews.push(doc.data()));
    const reviewList = document.getElementById("reviewList");
    const averageRating = document.getElementById("averageRating");
    const reviewCount = document.getElementById("reviewCount");
    const averageStars = document.getElementById("averageStars");

    if (!reviews.length) {
      reviewList.innerHTML = "No reviews yet.";
      averageRating.innerText = "0 out of 5";
      reviewCount.innerText = "0 global ratings";
      averageStars.innerText = "☆☆☆☆☆";
      return;
    }

    let total = 0;
    const dist = [0, 0, 0, 0, 0];

    reviewList.innerHTML = "";

    reviews.forEach(r => {
      total += r.stars;
      dist[5 - r.stars]++;
      const el = document.createElement("div");
      el.style = "margin-bottom: 1.5rem;";
      el.innerHTML = `
        <p><strong>${r.user}</strong> - ${new Date(r.date).toLocaleDateString()}</p>
        <div style="color: gold; font-size: 1.2rem;">${'★'.repeat(r.stars)}${'☆'.repeat(5 - r.stars)}</div>
        <p>${r.text}</p>
      `;
      reviewList.appendChild(el);
    });

    const avg = (total / reviews.length).toFixed(1);
    averageRating.innerText = `${avg} out of 5`;
    reviewCount.innerText = `${reviews.length} global ratings`;
    averageStars.innerText = '★'.repeat(Math.round(avg)) + '☆'.repeat(5 - Math.round(avg));

    const ratingDist = document.getElementById("ratingDistribution");
    ratingDist.innerHTML = "";
    [5, 4, 3, 2, 1].forEach((s, i) => {
      const percent = ((dist[i] / reviews.length) * 100).toFixed(0);
      const bar = `<div style="display:flex;align-items:center;gap:0.5rem;">
        <span>${s} star</span>
        <div style="flex:1;background:#eee;height:10px;position:relative;">
          <div style="width:${percent}%;height:100%;background:orange;"></div>
        </div>
        <span>${percent}%</span>
      </div>`;
      ratingDist.innerHTML += bar;
    });
  }

  document.addEventListener("DOMContentLoaded", loadReviews);
</script>


</main>



<!-- Footer -->
       <footer class="footer">
  <div class="footer-container">
    <div class="footer-content">
      <h3 class="footer-title">Yael Goldmann</h3>
      <p class="footer-tagline" data-i18n="footerTagline">
        Crafting stories that inspire, entertain, and transform
      </p>
      <div class="footer-links">
        <a href="#" data-i18n="footerTwitter">Twitter</a>
        <a href="#" data-i18n="footerInstagram">Instagram</a>
        <a href="#" data-i18n="footerFacebook">Facebook</a>
        <a href="#" data-i18n="footerGoodreads">Goodreads</a>
      </div>
      <p class="footer-copyright" data-i18n="footerCopyright">
        © 2025 Yael Goldmann. All rights reserved.
      </p>
    </div>
  </div>
</footer>

  

<script>
function imageZoom(imgID, resultID) {
  const img = document.getElementById(imgID);
  const result = document.getElementById(resultID);
  const lens = document.getElementById("lens");

  result.style.backgroundImage = `url('${img.src}')`;
  const zoomFactor = 2;

  img.addEventListener("mousemove", moveLens);
  result.addEventListener("mousemove", moveLens);
  img.addEventListener("mouseenter", () => {
    result.style.display = "block";
    lens.style.display = "block";
    result.style.backgroundImage = `url('${img.src}')`;
  });
  img.addEventListener("mouseleave", () => {
    result.style.display = "none";
    lens.style.display = "none";
  });

  function moveLens(e) {
    const pos = getCursorPos(e);
    const x = pos.x;
    const y = pos.y;

    const percentX = (x / img.width) * 100;
    const percentY = (y / img.height) * 100;
    result.style.backgroundPosition = `${percentX}% ${percentY}%`;

    // Mueve la lente encima de la imagen
    const lensSize = 150;
    const lensX = Math.max(0, Math.min(x - lensSize / 2, img.width - lensSize));
    const lensY = Math.max(0, Math.min(y - lensSize / 2, img.height - lensSize));
    lens.style.left = lensX + "px";
    lens.style.top = lensY + "px";
  }

  function getCursorPos(e) {
    const rect = img.getBoundingClientRect();
    const x = e.pageX - rect.left - window.scrollX;
    const y = e.pageY - rect.top - window.scrollY;
    return { x, y };
  }
}

document.addEventListener("DOMContentLoaded", () => {
  imageZoom("bookImage", "zoomResult");

  if (book) {
    document.getElementById("bookImage").src = book.image;
    document.getElementById("zoomResult").style.backgroundImage = `url('${book.image}')`;
    document.getElementById("thumb1").src = book.image;
    document.getElementById("thumb2").src = book.image2;

    document.getElementById("thumb1").addEventListener("click", () => {
      document.getElementById("bookImage").src = book.image;
      document.getElementById("zoomResult").style.backgroundImage = `url('${book.image}')`;
    });

    document.getElementById("thumb2").addEventListener("click", () => {
      document.getElementById("bookImage").src = book.image2;
      document.getElementById("zoomResult").style.backgroundImage = `url('${book.image2}')`;
    });
  }
});
</script>

<script>
  function selectFormat(format) {
    const price = book.prices[format];
    document.getElementById("bookPrice").textContent = `$${price.toFixed(2)}`;
    
    // Actualizar formato seleccionado global
    document.getElementById("format").value = format;

    // Resaltar el botón activo
    ['physical', 'digital', 'audio'].forEach(f => {
      const btn = document.getElementById(`btn-${f}`);
      if (f === format) {
        btn.classList.add("active");
        btn.style.border = "2px solid #007185";
        btn.style.backgroundColor = "#eef6fb";
      } else {
        btn.classList.remove("active");
        btn.style.border = "1px solid #d1d5db";
        btn.style.backgroundColor = "white";
      }
    });
  }

  function handleBuyNow() {
    handleAddToCart();
    window.location.href = "checkout.html";
  }

  // Al cargar precios
  document.addEventListener("DOMContentLoaded", () => {
    if (book) {
      document.getElementById("price-physical").textContent = book.prices.physical.toFixed(2);
      document.getElementById("price-digital").textContent = book.prices.digital.toFixed(2);
      document.getElementById("price-audio").textContent = book.prices.audio.toFixed(2);
      selectFormat("physical"); // Por defecto
    }
  });
</script>

<script>
  function selectFormatWithDelay(format) {
    const loader = document.getElementById("fullPageLoader");
    loader.style.display = "flex";

    // Desactiva botones temporalmente
    ['physical', 'digital', 'audio'].forEach(f => {
      const btn = document.getElementById(`btn-${f}`);
      btn.style.pointerEvents = "none";
    });

    setTimeout(() => {
      const price = book.prices[format];
      document.getElementById("bookPrice").textContent = `$${price.toFixed(2)}`;

      // Actualiza botones visuales
      ['physical', 'digital', 'audio'].forEach(f => {
        const btn = document.getElementById(`btn-${f}`);
        btn.classList.toggle("active", f === format);
        btn.style.border = f === format ? "2px solid #007185" : "1px solid #d1d5db";
        btn.style.backgroundColor = f === format ? "#eef6fb" : "white";
        btn.style.pointerEvents = "auto"; // Reactivar
      });

      loader.style.display = "none";
    }, 800);
  }
</script>

<script>
function addToCart(id, name, price, slug, quantity) {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];

  const existingItem = cart.find(item => item.id === id);

  const image = libros[slug]?.image || "IMAGES/placeholder.png";

  if (existingItem) {
    existingItem.quantity += quantity;
  } else {
    cart.push({
      id,
      name,
      price,
      slug,
      quantity,
      image
    });
  }

  localStorage.setItem("cart", JSON.stringify(cart));
}

function updateCartUI() {
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const cartItemsContainer = document.getElementById("cartItems");
  const cartCount = document.getElementById("cartCount");
  const subtotalEl = document.getElementById("cartSubtotal");
  const taxEl = document.getElementById("cartTax");
  const totalEl = document.getElementById("cartTotal");

  cartItemsContainer.innerHTML = "";
  let subtotal = 0;

  cart.forEach((item, index) => {
    const itemTotal = item.price * item.quantity;
    subtotal += itemTotal;

    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      <div style="display: flex; align-items: center; gap: 1rem;">
        <img src="${item.image}" alt="cover" style="width: 40px; height: auto; border-radius: 4px;">
        <div style="flex: 1;">
          <strong style="font-size: 0.9rem;">${item.name}</strong>
          <p style="font-size: 0.8rem; color: #6b7280;">$${item.price.toFixed(2)} each</p>
        </div>
        <div style="display: flex; align-items: center; gap: 0.5rem;">
          <button onclick="updateQuantity(${index}, -1)" style="padding: 0 8px;">−</button>
          <span>${item.quantity}</span>
          <button onclick="updateQuantity(${index}, 1)" style="padding: 0 8px;">+</button>
          <button onclick="removeItem(${index})" style="background: none; border: none; cursor: pointer;">
            <i data-lucide="trash-2"></i>
          </button>
        </div>
      </div>
      <hr style="margin: 0.75rem 0;">
    `;
    cartItemsContainer.appendChild(div);
  });

  const tax = subtotal * 0.085;
  const total = subtotal + tax;

  subtotalEl.textContent = `$${subtotal.toFixed(2)}`;
  taxEl.textContent = `$${tax.toFixed(2)}`;
  totalEl.textContent = `$${total.toFixed(2)}`;
  cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);

  lucide.createIcons();
}

function updateQuantity(index, change) {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart[index].quantity += change;
  if (cart[index].quantity <= 0) {
    cart.splice(index, 1);
  }
  localStorage.setItem("cart", JSON.stringify(cart));
  updateCartUI();
}

function removeItem(index) {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.splice(index, 1);
  localStorage.setItem("cart", JSON.stringify(cart));
  updateCartUI();
}
</script>

<script>
  let lastScrollTop = 0;
  const navbar = document.querySelector('.navbar');

  window.addEventListener('scroll', function () {
    let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

    if (scrollTop > lastScrollTop) {
      // Scroll hacia abajo - ocultar navbar
      navbar.style.top = '-80px'; // Ajusta si tu navbar es más alto
    } else {
      // Scroll hacia arriba - mostrar navbar
      navbar.style.top = '0';
    }

    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; // Previene valores negativos
  });
</script>

<script>
function getStarIcons(rating) {
  const fullStars = Math.floor(rating);
  const halfStar = rating % 1 >= 0.5;
  let starsHTML = "";

  for (let i = 0; i < fullStars; i++) {
    starsHTML += "★";
  }

  if (halfStar) {
    starsHTML += "☆"; // o "½" si prefieres
  }

  while (starsHTML.length < 5) {
    starsHTML += "☆";
  }

  return starsHTML;
}
</script>


<script>
document.addEventListener("DOMContentLoaded", () => {
  if (!book) return;

  const detailsList = document.getElementById("productDetailsList");

  function renderDetails(format) {
  const specs = book.specs[format];
  const label = format === "physical" ? "Dimensions" : "File Size";

  const detailHTML = `
  <li><strong data-i18n="product_language">Language:</strong> ${specs.language}</li>
  <li><strong data-i18n="product_publication_date">Publication Date:</strong> ${specs.publication}</li>
  <li><strong data-i18n="product_dimensions">${label}:</strong> ${specs.dimensions}</li>
  <li><strong data-i18n="product_print_length">Print Length:</strong> ${specs.pages}</li>
  <li>
    <strong data-i18n="product_customer_reviews">Customer Reviews:</strong> 
    <span style="color: gold; font-size: 1.1rem; vertical-align: middle;">
      ${getStarIcons(book.rating.value)}
    </span> 
    <span style="color: #555; font-size: 0.85rem; margin-left: 4px;">
      (${book.rating.count} reviews)
    </span>
  </li>
`;

  document.getElementById("productDetailsList").innerHTML = detailHTML;

  // ACTUALIZA ICONO Y TEXTO EN LA PARTE DE ARRIBA
  document.getElementById("spec-label").textContent = label;
  const iconElement = document.getElementById("spec-icon");
  iconElement.setAttribute("data-lucide", format === "physical" ? "ruler" : "file-text");
  lucide.createIcons();
}


  // Detectar el formato activo al cargar
  const selectedFormat = ['physical', 'digital', 'audio'].find(f =>
    document.getElementById(`btn-${f}`).classList.contains("active")
  ) || "physical";
  renderDetails(selectedFormat);

  // Vincular actualización dinámica con botón de formato
  ['physical', 'digital', 'audio'].forEach(f => {
    const btn = document.getElementById(`btn-${f}`);
    btn.addEventListener("click", () => renderDetails(f));
  });

  // ========== RELACIONADOS ==========
  const relatedContainer = document.getElementById("relatedContainer");
  let count = 0;

Object.entries(libros).forEach(([key, item]) => {
  if (key === slug) return; // no mostrar el mismo libro
  if (count >= 5) return; // mostrar solo hasta 5

  const card = document.createElement("div");
  card.style = `
    min-width: 120px;
    max-width: 120px;
    padding: 0.4rem;
    font-size: 0.75rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: left;
  `;

  card.innerHTML = `
    <a href="product-page.html?producto=${key}" style="text-decoration: none; color: inherit;">
      <img src="${item.image}" alt="${item.name}" style="width: 100px; height: auto; border-radius: 1px; margin-bottom: 0.4rem;">
      <p style="font-weight: 550; font-size: 0.8rem; color: #482922; text-decoration: none;">${item.name}</p>
      <p style="color: #555;">${item.description.slice(0, 40)}...</p>
      <div style="color: #fbbf24; font-size: 1.1rem;">
        ${getStarIcons(item.rating.value)} <span style="color: #666; font-size: 0.7rem;">(${item.rating.count})</span>
      </div>
      <p style="color: #482922; font-weight: bold; font-size: 1rem; margin-top: 0.2rem; text-decoration: none;">
        $${item.prices.physical.toFixed(2)}
      </p>
    </a>
  `;

  relatedContainer.appendChild(card);
  count++; // Incrementar el contador
});

});
</script>

<script>
function scrollToDetails() {
  const detailsSection = document.getElementById("product-details");
  if (detailsSection) {
    detailsSection.scrollIntoView({ behavior: "smooth" });
  }
}
</script>

<script>
  // Esta parte asume que Firebase ya fue inicializado y auth ya existe
  import("https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js").then(({ getAuth, onAuthStateChanged }) => {
    const auth = getAuth();
    const accountLink = document.getElementById("accountLink");

    onAuthStateChanged(auth, (user) => {
      if (user) {
        accountLink.href = "account.html";
        localStorage.setItem("userLoggedIn", "true");
      } else {
        accountLink.href = "login.html";
        localStorage.removeItem("userLoggedIn");
      }
    });
  });
</script>

<script>
  const langSelector = document.getElementById("langSelector");
  const languageOverlay = document.getElementById("languageOverlay");

  langSelector.addEventListener("mouseenter", () => {
  languageOverlay.classList.add("show");
  languageOverlay.style.display = "block";
});

langSelector.addEventListener("mouseleave", () => {
  setTimeout(() => {
    if (!langSelector.matches(':hover')) {
      languageOverlay.classList.remove("show");
      languageOverlay.style.display = "none";
    }
  }, 200);
});

languageOverlay.addEventListener("mouseenter", () => {
  languageOverlay.classList.add("show");
  languageOverlay.style.display = "block";
});

languageOverlay.addEventListener("mouseleave", () => {
  languageOverlay.classList.remove("show");
  languageOverlay.style.display = "none";
});

</script>

<script>
  document.getElementById("searchForm").addEventListener("submit", function (e) {
    e.preventDefault();
    const query = document.getElementById("searchInput").value.trim();
    if (query !== "") {
      window.location.href = `pagina-libros.html?query=${encodeURIComponent(query)}`;
    }
  });
</script>

<script>
  const searchInput = document.getElementById("searchInput");
  const overlay = document.getElementById("searchOverlay");
  let overlayVisible = false;

  // Mostrar overlay al enfocar el buscador
  searchInput.addEventListener("focus", () => {
    overlay.style.display = "block";
    overlayVisible = true;
  });

  // Ocultar overlay al desenfocar el buscador (con delay)
  searchInput.addEventListener("blur", () => {
    setTimeout(() => {
      overlay.style.display = "none";
      overlayVisible = false;
    }, 150);
  });

  // Ocultar overlay al hacer scroll con la rueda del ratón
  window.addEventListener("wheel", () => {
    if (overlayVisible) {
      overlay.style.display = "none";
      overlayVisible = false;
      searchInput.blur(); // También quita el foco
    }
  });
</script>

<script>
  async function loadLanguage(lang) {
    const response = await fetch("lang.json");
    const translations = await response.json();

    document.querySelectorAll("[data-i18n]").forEach((el) => {
      const key = el.getAttribute("data-i18n");
      const translation = translations[lang] && translations[lang][key];
      if (translation) {
        if (el.tagName === "INPUT" || el.tagName === "TEXTAREA") {
          el.value = translation;
        } else {
          el.innerText = translation;
        }
      }
    });

    document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
      const key = el.getAttribute("data-i18n-placeholder");
      const translation = translations[lang] && translations[lang][key];
      if (translation) el.placeholder = translation;
    });

    // Bandera y etiqueta
    const langSpan = document.querySelector(".selected-lang span");
    const langFlag = document.querySelector(".selected-lang img");
    if (lang === "es") {
      langSpan.textContent = "ES";
      langFlag.src = "https://flagcdn.com/es.svg";
    } else {
      langSpan.textContent = "EN";
      langFlag.src = "https://flagcdn.com/us.svg";
    }

    // Guarda selección
    localStorage.setItem("lang", lang);
  }

document.addEventListener("DOMContentLoaded", async () => {
  const savedLang = localStorage.getItem("lang") || "en";
  await loadLanguage(savedLang);

  // ✅ Aquí marcamos el radio correcto como seleccionado:
  document.querySelectorAll('input[name="lang"]').forEach((input) => {
    input.checked = input.value === savedLang;

input.addEventListener("change", async (e) => {
  const selectedLang = e.target.value;
  localStorage.setItem("lang", selectedLang);

  // Mostrar loader
  const overlay = document.getElementById("languageOverlay");
  const loader = document.getElementById("fullPageLoader");
  overlay.classList.add("show");
  overlay.style.display = "block";
  loader.style.display = "flex";

  try {
    await loadLanguage(selectedLang);

    // Re-renderiza descripción del libro
    if (window.book) {
      renderBookDescription(window.book);
    }

    // Esperar brevemente para asegurarse que los textos cambien visualmente
    await new Promise((res) => setTimeout(res, 300));
  } catch (error) {
    console.error("Error al cambiar idioma:", error);
  } finally {
    // Ocultar loader pase lo que pase
    loader.style.display = "none";
    overlay.classList.remove("show");
    overlay.style.display = "none";
  }
});


  });
});

</script>



<div id="fullPageLoader" class="full-page-loader">
  <div class="spinner"></div>
</div>

  <script src="script.js"></script>
  <script src="product-page.js"></script>

</body>

</html>
